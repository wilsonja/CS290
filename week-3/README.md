1) create a sort function that uses a generic comparator
2) fix a closure error
